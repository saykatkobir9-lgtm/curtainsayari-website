import {createContext,lazy,memo,useContext,isValidElement,useMemo,useId,useTransition,useState,useEffect,Suspense,useRef,useCallback}from'react';import {harden}from'rehype-harden';import Ve from'rehype-katex';import xr from'rehype-raw';import Tr from'remark-cjk-friendly';import Nr from'remark-cjk-friendly-gfm-strikethrough';import Ir from'remark-gfm';import We from'remark-math';import {DownloadIcon,CheckIcon,CopyIcon,Maximize2Icon,XIcon,Loader2Icon,ZoomInIcon,ZoomOutIcon,RotateCcwIcon}from'lucide-react';import {clsx}from'clsx';import {twMerge}from'tailwind-merge';import {jsx,jsxs,Fragment}from'react/jsx-runtime';import {toJsxRuntime}from'hast-util-to-jsx-runtime';import $o from'remark-parse';import Oo from'remark-rehype';import {Lexer}from'marked';var Cn=Object.create;var Xe=Object.defineProperty;var Pn=Object.getOwnPropertyDescriptor;var Mn=Object.getOwnPropertyNames;var xn=Object.getPrototypeOf,Tn=Object.prototype.hasOwnProperty;var Nn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var In=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Mn(t))!Tn.call(e,r)&&r!==n&&Xe(e,r,{get:()=>t[r],enumerable:!(o=Pn(t,r))||o.enumerable});return e};var Sn=(e,t,n)=>(n=e!=null?Cn(xn(e)):{},In(Xe(n,"default",{value:e,enumerable:true}),e));var Qt=Nn((li,Yt)=>{var fe=Object.prototype.hasOwnProperty,Zt=Object.prototype.toString,Vt=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Xt=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Zt.call(t)==="[object Array]"},Jt=function(t){if(!t||Zt.call(t)!=="[object Object]")return  false;var n=fe.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&fe.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return  false;var r;for(r in t);return typeof r=="undefined"||fe.call(t,r)},Kt=function(t,n){Vt&&n.name==="__proto__"?Vt(t,n.name,{enumerable:true,configurable:true,value:n.newValue,writable:true}):t[n.name]=n.newValue;},Gt=function(t,n){if(n==="__proto__")if(fe.call(t,n)){if(Wt)return Wt(t,n).value}else return;return t[n]};Yt.exports=function e(){var t,n,o,r,s,a,i=arguments[0],l=1,c=arguments.length,d=false;for(typeof i=="boolean"&&(d=i,i=arguments[1]||{},l=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});l<c;++l)if(t=arguments[l],t!=null)for(n in t)o=Gt(i,n),r=Gt(t,n),i!==r&&(d&&r&&(Jt(r)||(s=Xt(r)))?(s?(s=false,a=o&&Xt(o)?o:[]):a=o&&Jt(o)?o:{},Kt(i,{name:n,newValue:e(d,a,r)})):typeof r!="undefined"&&Kt(i,{name:n,newValue:r}));return i};});var p=(...e)=>twMerge(clsx(e)),E=(e,t,n)=>{let o=typeof t=="string"?new Blob([t],{type:n}):t,r=URL.createObjectURL(o),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r);};var Rn=createContext({code:""}),oe=()=>useContext(Rn);var ye=({onCopy:e,onError:t,timeout:n=2e3,children:o,className:r,code:s,...a})=>{let[i,l]=useState(false),c=useRef(0),{code:d}=oe(),{isAnimating:m}=useContext(P),f=s!=null?s:d,h=async()=>{var g;if(typeof window=="undefined"||!((g=navigator==null?void 0:navigator.clipboard)!=null&&g.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{i||(await navigator.clipboard.writeText(f),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),n));}catch(w){t==null||t(w);}};useEffect(()=>()=>{window.clearTimeout(c.current);},[]);let u=i?CheckIcon:CopyIcon;return jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),"data-streamdown":"code-block-copy-button",disabled:m,onClick:h,type:"button",...a,children:o!=null?o:jsx(u,{size:14})})};var Ke={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},Ze=({onDownload:e,onError:t,language:n,children:o,className:r,code:s,...a})=>{let{code:i}=oe(),{isAnimating:l}=useContext(P),c=s!=null?s:i,m=`file.${n&&n in Ke?Ke[n]:"txt"}`,f="text/plain",h=()=>{try{E(m,c,f),e==null||e();}catch(u){t==null||t(u);}};return jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),"data-streamdown":"code-block-download-button",disabled:l,onClick:h,title:"Download file",type:"button",...a,children:o!=null?o:jsx(DownloadIcon,{size:14})})};var ke=()=>jsxs("div",{className:"w-full divide-y divide-border overflow-hidden rounded-xl border border-border",children:[jsx("div",{className:"h-[46px] w-full bg-muted/80"}),jsx("div",{className:"flex w-full items-center justify-center p-4",children:jsx(Loader2Icon,{className:"size-4 animate-spin"})})]});var Wn=/\.[^/.]+$/,Ye=({node:e,className:t,src:n,alt:o,...r})=>{let s=async()=>{if(n)try{let i=await(await fetch(n)).blob(),c=new URL(n,window.location.origin).pathname.split("/").pop()||"",d=c.split(".").pop(),m=c.includes(".")&&d!==void 0&&d.length<=4,f="";if(m)f=c;else {let h=i.type,u="png";h.includes("jpeg")||h.includes("jpg")?u="jpg":h.includes("png")?u="png":h.includes("svg")?u="svg":h.includes("gif")?u="gif":h.includes("webp")&&(u="webp"),f=`${(o||c||"image").replace(Wn,"")}.${u}`;}E(f,i,i.type);}catch(a){console.error("Failed to download image:",a);}};return n?jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[jsx("img",{alt:o,className:p("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...r}),jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),jsx("button",{className:p("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:s,title:"Download image",type:"button",children:jsx(DownloadIcon,{size:14})})]}):null};var se=async e=>{let n={...{startOnLoad:false,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:true},...e},r=(await import('mermaid')).default;return r.initialize(n),r},Qe=(e,t)=>{var o;let n=(o=void 0)!=null?o:5;return new Promise((r,s)=>{let a="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{let l=document.createElement("canvas"),c=i.width*n,d=i.height*n;l.width=c,l.height=d;let m=l.getContext("2d");if(!m){s(new Error("Failed to create 2D canvas context for PNG export"));return}m.drawImage(i,0,0,c,d),l.toBlob(f=>{if(!f){s(new Error("Failed to create PNG blob"));return}r(f);},"image/png");},i.onerror=()=>s(new Error("Failed to load SVG image")),i.src=a;})};var tt=({chart:e,children:t,className:n,onDownload:o,config:r,onError:s})=>{let[a,i]=useState(false),l=useRef(null),{isAnimating:c}=useContext(P),d=async m=>{try{if(m==="mmd"){E("diagram.mmd",e,"text/plain"),i(!1),o==null||o(m);return}let f=await se(r),h=e.split("").reduce((w,k)=>(w<<5)-w+k.charCodeAt(0)|0,0),u=`mermaid-${Math.abs(h)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:g}=await f.render(u,e);if(!g){s==null||s(new Error("SVG not found. Please wait for the diagram to render."));return}if(m==="svg"){E("diagram.svg",g,"image/svg+xml"),i(!1),o==null||o(m);return}if(m==="png"){let w=await Qe(g);E("diagram.png",w,"image/png"),o==null||o(m),i(!1);return}}catch(f){s==null||s(f);}};return useEffect(()=>{let m=f=>{l.current&&!l.current.contains(f.target)&&i(false);};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m);}},[]),jsxs("div",{className:"relative",ref:l,children:[jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",n),disabled:c,onClick:()=>i(!a),title:"Download diagram",type:"button",children:t!=null?t:jsx(DownloadIcon,{size:14})}),a&&jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("svg"),type:"button",children:"SVG"}),jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("png"),type:"button",children:"PNG"}),jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("mmd"),type:"button",children:"MMD"})]})]})};var K=0,oo=()=>{K+=1,K===1&&(document.body.style.overflow="hidden");},ro=()=>{K=Math.max(0,K-1),K===0&&(document.body.style.overflow="");},st=({chart:e,config:t,onFullscreen:n,onExit:o,className:r,...s})=>{let[a,i]=useState(false),{isAnimating:l}=useContext(P),c=()=>{i(!a);};return useEffect(()=>{if(a){oo();let d=m=>{m.key==="Escape"&&i(false);};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d),ro();}}},[a]),useEffect(()=>{a?n==null||n():o&&o();},[a,n,o]),jsxs(Fragment,{children:[jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:l,onClick:c,title:"View fullscreen",type:"button",...s,children:jsx(Maximize2Icon,{size:14})}),a&&jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:c,onKeyDown:d=>{d.key==="Escape"&&c();},role:"button",tabIndex:0,children:[jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:c,title:"Exit fullscreen",type:"button",children:jsx(XIcon,{size:20})}),jsx("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:d=>d.stopPropagation(),onKeyDown:d=>d.stopPropagation(),role:"presentation",children:jsx(rt,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:true})})]})]})};var ie=e=>{var s,a;let t=[],n=[],o=e.querySelectorAll("thead th");for(let i of o)t.push(((s=i.textContent)==null?void 0:s.trim())||"");let r=e.querySelectorAll("tbody tr");for(let i of r){let l=[],c=i.querySelectorAll("td");for(let d of c)l.push(((a=d.textContent)==null?void 0:a.trim())||"");n.push(l);}return {headers:t,rows:n}},ae=e=>{let{headers:t,rows:n}=e,o=i=>{let l=false,c=false;for(let d=0;d<i.length;d+=1){let m=i[d];if(m==='"'){l=true,c=true;break}(m===","||m===`
`)&&(l=true);}return l?c?`"${i.replace(/"/g,'""')}"`:`"${i}"`:i},r=t.length>0?n.length+1:n.length,s=new Array(r),a=0;t.length>0&&(s[a]=t.map(o).join(","),a+=1);for(let i of n)s[a]=i.map(o).join(","),a+=1;return s.join(`
`)},it=e=>{let{headers:t,rows:n}=e,o=i=>{let l=false;for(let d=0;d<i.length;d+=1){let m=i[d];if(m==="	"||m===`
`||m==="\r"){l=true;break}}if(!l)return i;let c=[];for(let d=0;d<i.length;d+=1){let m=i[d];m==="	"?c.push("\\t"):m===`
`?c.push("\\n"):m==="\r"?c.push("\\r"):c.push(m);}return c.join("")},r=t.length>0?n.length+1:n.length,s=new Array(r),a=0;t.length>0&&(s[a]=t.map(o).join("	"),a+=1);for(let i of n)s[a]=i.map(o).join("	"),a+=1;return s.join(`
`)},ve=e=>{let t=false;for(let o=0;o<e.length;o+=1){let r=e[o];if(r==="\\"||r==="|"){t=true;break}}if(!t)return e;let n=[];for(let o=0;o<e.length;o+=1){let r=e[o];r==="\\"?n.push("\\\\"):r==="|"?n.push("\\|"):n.push(r);}return n.join("")},at=e=>{let{headers:t,rows:n}=e;if(t.length===0)return "";let o=new Array(n.length+2),r=0,s=t.map(i=>ve(i));o[r]=`| ${s.join(" | ")} |`,r+=1;let a=new Array(t.length);for(let i=0;i<t.length;i+=1)a[i]="---";o[r]=`| ${a.join(" | ")} |`,r+=1;for(let i of n)if(i.length<t.length){let l=new Array(t.length);for(let c=0;c<t.length;c+=1)l[c]=c<i.length?ve(i[c]):"";o[r]=`| ${l.join(" | ")} |`,r+=1;}else {let l=i.map(c=>ve(c));o[r]=`| ${l.join(" | ")} |`,r+=1;}return o.join(`
`)};var mt=({children:e,className:t,onCopy:n,onError:o,timeout:r=2e3})=>{let[s,a]=useState(false),[i,l]=useState(false),c=useRef(null),d=useRef(0),{isAnimating:m}=useContext(P),f=async u=>{var g,w;if(typeof window=="undefined"||!((g=navigator==null?void 0:navigator.clipboard)!=null&&g.write)){o==null||o(new Error("Clipboard API not available"));return}try{let k=(w=c.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),x=k==null?void 0:k.querySelector("table");if(!x){o==null||o(new Error("Table not found"));return}let N=ie(x),T=u==="csv"?ae(N):it(N),B=new ClipboardItem({"text/plain":new Blob([T],{type:"text/plain"}),"text/html":new Blob([x.outerHTML],{type:"text/html"})});await navigator.clipboard.write([B]),l(!0),a(!1),n==null||n(u),d.current=window.setTimeout(()=>l(!1),r);}catch(k){o==null||o(k);}};useEffect(()=>{let u=g=>{c.current&&!c.current.contains(g.target)&&a(false);};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u),window.clearTimeout(d.current);}},[]);let h=i?CheckIcon:CopyIcon;return jsxs("div",{className:"relative",ref:c,children:[jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:m,onClick:()=>a(!s),title:"Copy table",type:"button",children:e!=null?e:jsx(h,{size:14})}),s&&jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>f("csv"),type:"button",children:"CSV"}),jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>f("tsv"),type:"button",children:"TSV"})]})]})};var ut=({children:e,className:t,onDownload:n,onError:o})=>{let[r,s]=useState(false),a=useRef(null),{isAnimating:i}=useContext(P),l=c=>{var d;try{let m=(d=a.current)==null?void 0:d.closest('[data-streamdown="table-wrapper"]'),f=m==null?void 0:m.querySelector("table");if(!f){o==null||o(new Error("Table not found"));return}let h=ie(f),u=c==="csv"?ae(h):at(h);E(`table.${c==="csv"?"csv":"md"}`,u,c==="csv"?"text/csv":"text/markdown"),s(!1),n==null||n(c);}catch(m){o==null||o(m);}};return useEffect(()=>{let c=d=>{a.current&&!a.current.contains(d.target)&&s(false);};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c);}},[]),jsxs("div",{className:"relative",ref:a,children:[jsx("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:i,onClick:()=>s(!r),title:"Download table",type:"button",children:e!=null?e:jsx(DownloadIcon,{size:14})}),r&&jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",children:"CSV"}),jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",children:"Markdown"})]})]})};var ht=({children:e,className:t,showControls:n,...o})=>jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[n&&jsxs("div",{className:"flex items-center justify-end gap-1",children:[jsx(mt,{}),jsx(ut,{})]}),jsx("div",{className:"overflow-x-auto",children:jsx("table",{className:p("w-full border-collapse border border-border",t),"data-streamdown":"table",...o,children:e})})]});var go=lazy(()=>import('./code-block-37OJIHUH.js').then(e=>({default:e.CodeBlock}))),bo=lazy(()=>import('./mermaid-C3E5BNF6.js').then(e=>({default:e.Mermaid}))),yo=/language-([^\s]+)/;function me(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return  true;if(!(e!=null&&e.position&&(t!=null&&t.position)))return  false;let n=e.position.start,o=t.position.start,r=e.position.end,s=t.position.end;return (n==null?void 0:n.line)===(o==null?void 0:o.line)&&(n==null?void 0:n.column)===(o==null?void 0:o.column)&&(r==null?void 0:r.line)===(s==null?void 0:s.line)&&(r==null?void 0:r.column)===(s==null?void 0:s.column)}function C(e,t){return e.className===t.className&&me(e.node,t.node)}var Me=(e,t)=>typeof e=="boolean"?e:e[t]!==false,Ce=(e,t)=>{if(typeof e=="boolean")return e;let n=e.mermaid;return n===false?false:n===true||n===void 0?true:n[t]!==false},xe=memo(({children:e,className:t,node:n,...o})=>jsx("ol",{className:p("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...o,children:e}),(e,t)=>C(e,t));xe.displayName="MarkdownOl";var wt=memo(({children:e,className:t,node:n,...o})=>jsx("li",{className:p("py-1",t),"data-streamdown":"list-item",...o,children:e}),(e,t)=>e.className===t.className&&me(e.node,t.node));wt.displayName="MarkdownLi";var kt=memo(({children:e,className:t,node:n,...o})=>jsx("ul",{className:p("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...o,children:e}),(e,t)=>C(e,t));kt.displayName="MarkdownUl";var vt=memo(({className:e,node:t,...n})=>jsx("hr",{className:p("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>C(e,t));vt.displayName="MarkdownHr";var Ct=memo(({children:e,className:t,node:n,...o})=>jsx("span",{className:p("font-semibold",t),"data-streamdown":"strong",...o,children:e}),(e,t)=>C(e,t));Ct.displayName="MarkdownStrong";var Pt=memo(({children:e,className:t,href:n,node:o,...r})=>{let s=n==="streamdown:incomplete-link";return jsx("a",{className:p("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":s,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...r,children:e})},(e,t)=>C(e,t)&&e.href===t.href);Pt.displayName="MarkdownA";var Mt=memo(({children:e,className:t,node:n,...o})=>jsx("h1",{className:p("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...o,children:e}),(e,t)=>C(e,t));Mt.displayName="MarkdownH1";var xt=memo(({children:e,className:t,node:n,...o})=>jsx("h2",{className:p("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...o,children:e}),(e,t)=>C(e,t));xt.displayName="MarkdownH2";var Tt=memo(({children:e,className:t,node:n,...o})=>jsx("h3",{className:p("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...o,children:e}),(e,t)=>C(e,t));Tt.displayName="MarkdownH3";var Nt=memo(({children:e,className:t,node:n,...o})=>jsx("h4",{className:p("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...o,children:e}),(e,t)=>C(e,t));Nt.displayName="MarkdownH4";var It=memo(({children:e,className:t,node:n,...o})=>jsx("h5",{className:p("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...o,children:e}),(e,t)=>C(e,t));It.displayName="MarkdownH5";var St=memo(({children:e,className:t,node:n,...o})=>jsx("h6",{className:p("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...o,children:e}),(e,t)=>C(e,t));St.displayName="MarkdownH6";var At=memo(({children:e,className:t,node:n,...o})=>{let{controls:r}=useContext(P),s=Me(r,"table");return jsx(ht,{className:t,"data-streamdown":"table-wrapper",showControls:s,...o,children:e})},(e,t)=>C(e,t));At.displayName="MarkdownTable";var Et=memo(({children:e,className:t,node:n,...o})=>jsx("thead",{className:p("bg-muted/80",t),"data-streamdown":"table-header",...o,children:e}),(e,t)=>C(e,t));Et.displayName="MarkdownThead";var Lt=memo(({children:e,className:t,node:n,...o})=>jsx("tbody",{className:p("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...o,children:e}),(e,t)=>C(e,t));Lt.displayName="MarkdownTbody";var Bt=memo(({children:e,className:t,node:n,...o})=>jsx("tr",{className:p("border-border border-b",t),"data-streamdown":"table-row",...o,children:e}),(e,t)=>C(e,t));Bt.displayName="MarkdownTr";var Rt=memo(({children:e,className:t,node:n,...o})=>jsx("th",{className:p("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...o,children:e}),(e,t)=>C(e,t));Rt.displayName="MarkdownTh";var Dt=memo(({children:e,className:t,node:n,...o})=>jsx("td",{className:p("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...o,children:e}),(e,t)=>C(e,t));Dt.displayName="MarkdownTd";var jt=memo(({children:e,className:t,node:n,...o})=>jsx("blockquote",{className:p("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...o,children:e}),(e,t)=>C(e,t));jt.displayName="MarkdownBlockquote";var $t=memo(({children:e,className:t,node:n,...o})=>jsx("sup",{className:p("text-sm",t),"data-streamdown":"superscript",...o,children:e}),(e,t)=>C(e,t));$t.displayName="MarkdownSup";var Ot=memo(({children:e,className:t,node:n,...o})=>jsx("sub",{className:p("text-sm",t),"data-streamdown":"subscript",...o,children:e}),(e,t)=>C(e,t));Ot.displayName="MarkdownSub";var Ht=memo(({children:e,className:t,node:n,...o})=>{if("data-footnotes"in o){let s=l=>{var f,h;if(!isValidElement(l))return  false;let c=Array.isArray(l.props.children)?l.props.children:[l.props.children],d=false,m=false;for(let u of c)if(u){if(typeof u=="string")u.trim()!==""&&(d=true);else if(isValidElement(u))if(((f=u.props)==null?void 0:f["data-footnote-backref"])!==void 0)m=true;else {let g=Array.isArray(u.props.children)?u.props.children:[u.props.children];for(let w of g){if(typeof w=="string"&&w.trim()!==""){d=true;break}if(isValidElement(w)&&((h=w.props)==null?void 0:h["data-footnote-backref"])===void 0){d=true;break}}}}return m&&!d},a=Array.isArray(e)?e.map(l=>{if(!isValidElement(l))return l;if(l.type===xe){let d=(Array.isArray(l.props.children)?l.props.children:[l.props.children]).filter(m=>!s(m));return d.length===0?null:{...l,props:{...l.props,children:d}}}return l}):e;return (Array.isArray(a)?a.some(l=>l!==null):a!==null)?jsx("section",{className:t,...o,children:a}):null}return jsx("section",{className:t,...o,children:e})},(e,t)=>C(e,t));Ht.displayName="MarkdownSection";var wo=({node:e,className:t,children:n,...o})=>{var m,f,h;let r=((m=e==null?void 0:e.position)==null?void 0:m.start.line)===((f=e==null?void 0:e.position)==null?void 0:f.end.line),{mermaid:s,controls:a}=useContext(P);if(r)return jsx("code",{className:p("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...o,children:n});let i=t==null?void 0:t.match(yo),l=(h=i==null?void 0:i.at(1))!=null?h:"",c="";if(isValidElement(n)&&n.props&&typeof n.props=="object"&&"children"in n.props&&typeof n.props.children=="string"?c=n.props.children:typeof n=="string"&&(c=n),l==="mermaid"){let u=Me(a,"mermaid"),g=Ce(a,"download"),w=Ce(a,"copy"),k=Ce(a,"fullscreen");return jsxs("div",{className:p("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[u&&(g||w||k)&&jsxs("div",{className:"flex items-center justify-end gap-2",children:[g&&jsx(tt,{chart:c,config:s==null?void 0:s.config}),w&&jsx(ye,{code:c}),k&&jsx(st,{chart:c,config:s==null?void 0:s.config})]}),jsx(Suspense,{fallback:jsx(ke,{}),children:jsx(bo,{chart:c,config:s==null?void 0:s.config})})]})}let d=Me(a,"code");return jsx(Suspense,{fallback:jsx(ke,{}),children:jsx(go,{className:p("overflow-x-auto border-border border-t",t),code:c,"data-language":l,"data-streamdown":"code-block",language:l,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:d&&jsxs(Fragment,{children:[jsx(Ze,{code:c,language:l}),jsx(ye,{})]})})})},zt=memo(wo,(e,t)=>e.className===t.className&&me(e.node,t.node));zt.displayName="MarkdownCode";var _t=memo(Ye,(e,t)=>e.className===t.className&&me(e.node,t.node));_t.displayName="MarkdownImg";var qt=memo(({children:e,className:t,node:n,...o})=>{var a;let s=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return s.length===1&&isValidElement(s[0])&&((a=s[0].props.node)==null?void 0:a.tagName)==="img"?jsx(Fragment,{children:e}):jsx("p",{className:t,...o,children:e})},(e,t)=>C(e,t));qt.displayName="MarkdownParagraph";var Ut={ol:xe,li:wt,ul:kt,hr:vt,strong:Ct,a:Pt,h1:Mt,h2:xt,h3:Tt,h4:Nt,h5:It,h6:St,table:At,thead:Et,tbody:Lt,tr:Bt,th:Rt,td:Dt,blockquote:jt,code:zt,img:_t,pre:({children:e})=>e,sup:$t,sub:Ot,p:qt,section:Ht};function Te(e){if(e)throw e}var pe=Sn(Qt());function G(e){if(typeof e!="object"||e===null)return  false;let t=Object.getPrototypeOf(e);return (t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ne(){let e=[],t={run:n,use:o};return t;function n(...r){let s=-1,a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);i(null,...r);function i(l,...c){let d=e[++s],m=-1;if(l){a(l);return}for(;++m<r.length;)(c[m]===null||c[m]===void 0)&&(c[m]=r[m]);r=c,d?en(d,i)(...c):a(null,...c);}}function o(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function en(e,t){let n;return o;function o(...a){let i=e.length>a.length,l;i&&a.push(r);try{l=e.apply(this,a);}catch(c){let d=c;if(i&&n)throw d;return r(d)}i||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l));}function r(a,...i){n||(n=true,t(a,...i));}function s(a){r(null,a);}}function Se(e){return !e||typeof e!="object"?"":"position"in e||"type"in e?tn(e.position):"start"in e||"end"in e?tn(e):"line"in e||"column"in e?Ie(e):""}function Ie(e){return nn(e&&e.line)+":"+nn(e&&e.column)}function tn(e){return Ie(e&&e.start)+"-"+Ie(e&&e.end)}function nn(e){return e&&typeof e=="number"?e:1}var M=class extends Error{constructor(t,n,o){super(),typeof n=="string"&&(o=n,n=void 0);let r="",s={},a=false;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?r=t:!s.cause&&t&&(a=true,r=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof o=="string"){let l=o.indexOf(":");l===-1?s.ruleId=o:(s.source=o.slice(0,l),s.ruleId=o.slice(l+1));}if(!s.place&&s.ancestors&&s.ancestors){let l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position);}let i=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=i?i.line:void 0,this.name=Se(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0;}};M.prototype.file="";M.prototype.name="";M.prototype.reason="";M.prototype.message="";M.prototype.stack="";M.prototype.column=void 0;M.prototype.line=void 0;M.prototype.ancestors=void 0;M.prototype.cause=void 0;M.prototype.fatal=void 0;M.prototype.place=void 0;M.prototype.ruleId=void 0;M.prototype.source=void 0;var A={basename:ko,dirname:vo,extname:Co,join:Po,sep:"/"};function ko(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Z(e);let n=0,o=-1,r=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=true,o=r+1);return o<0?"":e.slice(n,o)}if(t===e)return "";let a=-1,i=t.length-1;for(;r--;)if(e.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=true,a=r+1),i>-1&&(e.codePointAt(r)===t.codePointAt(i--)?i<0&&(o=r):(i=-1,o=a));return n===o?o=a:o<0&&(o=e.length),e.slice(n,o)}function vo(e){if(Z(e),e.length===0)return ".";let t=-1,n=e.length,o;for(;--n;)if(e.codePointAt(n)===47){if(o){t=n;break}}else o||(o=true);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Co(e){Z(e);let t=e.length,n=-1,o=0,r=-1,s=0,a;for(;t--;){let i=e.codePointAt(t);if(i===47){if(a){o=t+1;break}continue}n<0&&(a=true,n=t+1),i===46?r<0?r=t:s!==1&&(s=1):r>-1&&(s=-1);}return r<0||n<0||s===0||s===1&&r===n-1&&r===o+1?"":e.slice(r,n)}function Po(...e){let t=-1,n;for(;++t<e.length;)Z(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Mo(n)}function Mo(e){Z(e);let t=e.codePointAt(0)===47,n=xo(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function xo(e,t){let n="",o=0,r=-1,s=0,a=-1,i,l;for(;++a<=e.length;){if(a<e.length)i=e.codePointAt(a);else {if(i===47)break;i=47;}if(i===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||o!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",o=0):(n=n.slice(0,l),o=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length>0){n="",o=0,r=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",o=2);}else n.length>0?n+="/"+e.slice(r+1,a):n=e.slice(r+1,a),o=a-r-1;r=a,s=0;}else i===46&&s>-1?s++:s=-1;}return n}function Z(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}var on={cwd:To};function To(){return "/"}function X(e){return !!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function rn(e){if(typeof e=="string")e=new URL(e);else if(!X(e)){let t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){let t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return No(e)}function No(e){if(e.hostname!==""){let o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}let t=e.pathname,n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){let o=t.codePointAt(n+2);if(o===70||o===102){let r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}var Ae=["history","path","basename","stem","extname","dirname"],Y=class{constructor(t){let n;t?X(t)?n={path:t}:typeof t=="string"||Io(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":on.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<Ae.length;){let s=Ae[o];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s]);}let r;for(r in n)Ae.includes(r)||(this[r]=n[r]);}get basename(){return typeof this.path=="string"?A.basename(this.path):void 0}set basename(t){Le(t,"basename"),Ee(t,"basename"),this.path=A.join(this.dirname||"",t);}get dirname(){return typeof this.path=="string"?A.dirname(this.path):void 0}set dirname(t){sn(this.basename,"dirname"),this.path=A.join(t||"",this.basename);}get extname(){return typeof this.path=="string"?A.extname(this.path):void 0}set extname(t){if(Ee(t,"extname"),sn(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=A.join(this.dirname,this.stem+(t||""));}get path(){return this.history[this.history.length-1]}set path(t){X(t)&&(t=rn(t)),Le(t,"path"),this.path!==t&&this.history.push(t);}get stem(){return typeof this.path=="string"?A.basename(this.path,this.extname):void 0}set stem(t){Le(t,"stem"),Ee(t,"stem"),this.path=A.join(this.dirname||"",t+(this.extname||""));}fail(t,n,o){let r=this.message(t,n,o);throw r.fatal=true,r}info(t,n,o){let r=this.message(t,n,o);return r.fatal=void 0,r}message(t,n,o){let r=new M(t,n,o);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=false,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}};function Ee(e,t){if(e&&e.includes(A.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+A.sep+"`")}function Le(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function sn(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Io(e){return !!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var an=(function(e){let o=this.constructor.prototype,r=o[e],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,o),s});var So={}.hasOwnProperty,je=class e extends an{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ne();}copy(){let t=new e,n=-1;for(;++n<this.attachers.length;){let o=this.attachers[n];t.use(...o);}return t.data((0, pe.default)(true,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(De("data",this.frozen),this.namespace[t]=n,this):So.call(this.namespace,t)&&this.namespace[t]||void 0:t?(De("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;let t=this;for(;++this.freezeIndex<this.attachers.length;){let[n,...o]=this.attachers[this.freezeIndex];if(o[0]===false)continue;o[0]===true&&(o[0]=void 0);let r=n.call(t,...o);typeof r=="function"&&this.transformers.use(r);}return this.frozen=true,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();let n=ue(t),o=this.parser||this.Parser;return Be("parse",o),o(String(n),n)}process(t,n){let o=this;return this.freeze(),Be("process",this.parser||this.Parser),Re("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,a){let i=ue(t),l=o.parse(i);o.run(l,i,function(d,m,f){if(d||!m||!f)return c(d);let h=m,u=o.stringify(h,f);Eo(u)?f.value=u:f.result=u,c(d,f);});function c(d,m){d||!m?a(d):s?s(m):n(void 0,m);}}}processSync(t){let n=false,o;return this.freeze(),Be("processSync",this.parser||this.Parser),Re("processSync",this.compiler||this.Compiler),this.process(t,r),cn("processSync","process",n),o;function r(s,a){n=true,Te(s),o=a;}}run(t,n,o){ln(t),this.freeze();let r=this.transformers;return !o&&typeof n=="function"&&(o=n,n=void 0),o?s(void 0,o):new Promise(s);function s(a,i){let l=ue(n);r.run(t,l,c);function c(d,m,f){let h=m||t;d?i(d):a?a(h):o(void 0,h,f);}}}runSync(t,n){let o=false,r;return this.run(t,n,s),cn("runSync","run",o),r;function s(a,i){Te(a),r=i,o=true;}}stringify(t,n){this.freeze();let o=ue(n),r=this.compiler||this.Compiler;return Re("stringify",r),ln(t),r(t,o)}use(t,...n){let o=this.attachers,r=this.namespace;if(De("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?i(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[d,...m]=c;l(d,m);}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(c.plugins),c.settings&&(r.settings=(0, pe.default)(true,r.settings,c.settings));}function i(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){let m=c[d];s(m);}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let m=-1,f=-1;for(;++m<o.length;)if(o[m][0]===c){f=m;break}if(f===-1)o.push([c,...d]);else if(d.length>0){let[h,...u]=d,g=o[f][1];G(g)&&G(h)&&(h=(0, pe.default)(true,g,h)),o[f]=[c,h,...u];}}}},$e=new je().freeze();function Be(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Re(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function De(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ln(e){if(!G(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function cn(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ue(e){return Ao(e)?e:new Y(e)}function Ao(e){return !!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Eo(e){return typeof e=="string"||Lo(e)}function Lo(e){return !!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var dn=[],mn={allowDangerousHtml:true},he=new WeakMap,Oe=class{constructor(){this.cache=new Map;this.keyCache=new WeakMap;this.maxSize=100;}generateCacheKey(t){let n=this.keyCache.get(t);if(n)return n;let o=t.rehypePlugins,r=t.remarkPlugins,s=t.remarkRehypeOptions;if(!(o||r||s)){let m="default";return this.keyCache.set(t,m),m}let a=m=>{if(!m||m.length===0)return "";let f="";for(let h=0;h<m.length;h+=1){let u=m[h];if(h>0&&(f+=","),Array.isArray(u)){let[g,w]=u;if(typeof g=="function"){let k=he.get(g);k||(k=g.name,he.set(g,k)),f+=k;}else f+=String(g);f+=":",f+=JSON.stringify(w);}else if(typeof u=="function"){let g=he.get(u);g||(g=u.name,he.set(u,g)),f+=g;}else f+=String(u);}return f},i=a(o),l=a(r),c=s?JSON.stringify(s):"",d=`${l}::${i}::${c}`;return this.keyCache.set(t,d),d}get(t){let n=this.generateCacheKey(t),o=this.cache.get(n);return o&&(this.cache.delete(n),this.cache.set(n,o)),o}set(t,n){let o=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let r=this.cache.keys().next().value;r&&this.cache.delete(r);}this.cache.set(o,n);}clear(){this.cache.clear();}},fn=new Oe,He=e=>{let t=Ho(e),n=e.children||"";return _o(t.runSync(t.parse(n),n),e)},Ho=e=>{let t=fn.get(e);if(t)return t;let n=zo(e);return fn.set(e,n),n},zo=e=>{let t=e.rehypePlugins||dn,n=e.remarkPlugins||dn,o=e.remarkRehypeOptions?{...mn,...e.remarkRehypeOptions}:mn;return $e().use($o).use(n).use(Oo,o).use(t)},_o=(e,t)=>toJsxRuntime(e,{Fragment:Fragment,components:t.components,ignoreInvalidStyle:true,jsx:jsx,jsxs:jsxs,passKeys:true,passNode:true});var Uo=/\[\^[^\]\s]{1,200}\](?!:)/,Fo=/\[\^[^\]\s]{1,200}\]:/,Vo=/<\/(\w+)>/,Wo=/<(\w+)[\s>]/,ze=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},Xo=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},_e=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},qe=e=>{let t=Uo.test(e),n=Fo.test(e);if(t||n)return [e];let o=Lexer.lex(e,{gfm:true}),r=[],s=[];for(let a of o){let i=a.raw,l=r.length;if(s.length>0){if(r[l-1]+=i,a.type==="html"){let d=i.match(Vo);if(d){let m=d[1];s.at(-1)===m&&s.pop();}}continue}if(a.type==="html"&&a.block){let d=i.match(Wo);if(d){let m=d[1];i.includes(`</${m}>`)||s.push(m);}}if(i.trim()==="$$"&&l>0){let d=r[l-1],m=ze(d),f=_e(d);if(m&&f%2===1){r[l-1]=d+i;continue}}if(l>0&&Xo(i)){let d=r[l-1],m=ze(d),f=_e(d),h=_e(i);if(m&&f%2===1&&!ze(i)&&h===1){r[l-1]=d+i;continue}}r.push(i);}return r};var Jo=/(\*\*)([^*]*?)$/,Ko=/(__)([^_]*?)$/,Go=/(\*\*\*)([^*]*?)$/,Zo=/(\*)([^*]*?)$/,Yo=/(_)([^_]*?)$/,Qo=/(`)([^`]*?)$/,er=/(~~)([^~]*?)$/,_=/^[\s_~*`]*$/,un=/^[\s]*[-*+][\s]+$/,tr=/[\p{L}\p{N}_]/u,nr=/^```[^`\n]*```?$/,or=/^\*{4,}$/,D=e=>{if(!e)return  false;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?true:tr.test(e)},ge=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)};var rr=(e,t)=>{let n=1;for(let o=t-1;o>=0;o-=1)if(e[o]==="]")n+=1;else if(e[o]==="["&&(n-=1,n===0))return o;return  -1},sr=(e,t)=>{let n=1;for(let o=t+1;o<e.length;o+=1)if(e[o]==="[")n+=1;else if(e[o]==="]"&&(n-=1,n===0))return o;return  -1},Ue=(e,t)=>{let n=false,o=false;for(let r=0;r<t;r+=1){if(e.substring(r,r+3)==="```"){o=!o,r+=2;continue}!o&&e[r]==="`"&&(n=!n);}return n||o},ir=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!Ue(e,t)&&!e.substring(t+2).includes(")")){let o=rr(e,t);if(o!==-1&&!Ue(e,o)){let r=o>0&&e[o-1]==="!",s=r?o-1:o,a=e.substring(0,s),i=e.substring(o+1,t);return r?a:`${a}[${i}](streamdown:incomplete-link)`}}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!Ue(e,n)){let o=n>0&&e[n-1]==="!",r=o?n-1:n;if(!e.substring(n+1).includes("]")){let i=e.substring(0,r);return o?i:`${e}](streamdown:incomplete-link)`}if(sr(e,n)===-1){let i=e.substring(0,r);return o?i:`${e}](streamdown:incomplete-link)`}}return e},ar=e=>{if(ge(e))return e;let t=e.match(Jo);if(t){let n=t[2];if(!n||_.test(n))return e;let o=e.lastIndexOf(t[1]),s=e.substring(0,o).lastIndexOf(`
`),a=s===-1?0:s+1,i=e.substring(a,o);if(un.test(i)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return `${e}**`}return e},lr=e=>{let t=e.match(Ko);if(t){let n=t[2];if(!n||_.test(n))return e;let o=e.lastIndexOf(t[1]),s=e.substring(0,o).lastIndexOf(`
`),a=s===-1?0:s+1,i=e.substring(a,o);if(un.test(i)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return `${e}__`}return e},cr=e=>{let t=0,n=e.length;for(let o=0;o<n;o+=1){if(e[o]!=="*")continue;let r=o>0?e[o-1]:"",s=o<n-1?e[o+1]:"";if(r==="\\"||r==="*"||s==="*"||r&&s&&D(r)&&D(s))continue;let a=0;for(let l=o-1;l>=0;l-=1)if(e[l]===`
`){a=l+1;break}let i=true;for(let l=a;l<o;l+=1)if(e[l]!==" "&&e[l]!=="	"){i=false;break}i&&(s===" "||s==="	")||(t+=1);}return t},dr=e=>{if(ge(e))return e;if(e.match(Zo)){let n=-1;for(let s=0;s<e.length;s+=1)if(e[s]==="*"&&e[s-1]!=="*"&&e[s+1]!=="*"&&e[s-1]!=="\\"){let a=s>0?e[s-1]:"",i=s<e.length-1?e[s+1]:"";if(a&&i&&D(a)&&D(i))continue;n=s;break}if(n===-1)return e;let o=e.substring(n+1);if(!o||_.test(o))return e;if(cr(e)%2===1)return `${e}*`}return e},pn=(e,t)=>{let n=false,o=false;for(let r=0;r<e.length&&r<t;r+=1){if(e[r]==="\\"&&e[r+1]==="$"){r+=1;continue}e[r]==="$"&&(e[r+1]==="$"?(o=!o,r+=1,n=false):o||(n=!n));}return n||o},mr=e=>{let t=e.includes("$"),n=0,o=e.length;for(let r=0;r<o;r+=1){if(e[r]!=="_")continue;let s=r>0?e[r-1]:"",a=r<o-1?e[r+1]:"";s!=="\\"&&(t&&pn(e,r)||s==="_"||a==="_"||s&&a&&D(s)&&D(a)||(n+=1));}return n},fr=e=>{if(ge(e))return e;if(e.match(Yo)){let n=-1;for(let s=0;s<e.length;s+=1)if(e[s]==="_"&&e[s-1]!=="_"&&e[s+1]!=="_"&&e[s-1]!=="\\"&&!pn(e,s)){let a=s>0?e[s-1]:"",i=s<e.length-1?e[s+1]:"";if(a&&i&&D(a)&&D(i))continue;n=s;break}if(n===-1)return e;let o=e.substring(n+1);if(!o||_.test(o))return e;if(mr(e)%2===1){let s=e.length;for(;s>0&&e[s-1]===`
`;)s-=1;if(s<e.length){let a=e.slice(0,s),i=e.slice(s);return `${a}_${i}`}return `${e}_`}}return e},ur=(e,t)=>{let n=e.substring(t,t+3)==="```",o=t>0&&e.substring(t-1,t+2)==="```",r=t>1&&e.substring(t-2,t+1)==="```";return n||o||r},pr=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!ur(e,n)&&(t+=1);return t},hr=e=>{if(e.match(nr)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let n=(e.match(/```/g)||[]).length,o=n%2===1;if(n>0&&n%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&n%2===0)return e;let r=e.match(Qo);if(r&&!o){let s=r[2];if(!s||_.test(s))return e;if(pr(e)%2===1)return `${e}\``}return e},gr=e=>{let t=e.match(er);if(t){let n=t[2];if(!n||_.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return `${e}~~`}return e},br=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let n=e.indexOf("$$");return n!==-1&&e.indexOf(`
`,n)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},yr=e=>{let t=0,n=0;for(let o=0;o<e.length;o+=1)e[o]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},wr=e=>{if(ge(e)||or.test(e))return e;let t=e.match(Go);if(t){let n=t[2];if(!n||_.test(n))return e;if(yr(e)%2===1)return `${e}***`}return e},Fe=e=>{if(!e||typeof e!="string")return e;let t=e,n=ir(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=wr(t),t=ar(t),t=lr(t),t=dr(t),t=fr(t),t=hr(t),t=gr(t),t=br(t),t)};var Sr={harden:[harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:true}],raw:xr,katex:[Ve,{errorColor:"var(--color-muted-foreground)"}]},Ar={gfm:[Ir,{}],math:[We,{singleDollarTextMath:false}],cjkFriendly:[Tr,{}],cjkFriendlyGfmStrikethrough:[Nr,{}]},Er=Object.values(Sr),Lr=Object.values(Ar),Br={shikiTheme:["github-light","github-dark"],controls:true,isAnimating:false,mode:"streaming",mermaid:void 0},P=createContext(Br),bn=memo(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let o=useMemo(()=>typeof e=="string"&&t?Fe(e.trim()):e,[e,t]);return jsx(He,{...n,children:o})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return  false;if(e.components!==t.components){let n=Object.keys(e.components||{}),o=Object.keys(t.components||{});if(n.length!==o.length||n.some(r=>{var s,a;return ((s=e.components)==null?void 0:s[r])!==((a=t.components)==null?void 0:a[r])}))return  false}return !(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});bn.displayName="Block";var Rr=["github-light","github-dark"],Dr=memo(({children:e,mode:t="streaming",parseIncompleteMarkdown:n=true,components:o,rehypePlugins:r=Er,remarkPlugins:s=Lr,className:a,shikiTheme:i=Rr,mermaid:l,controls:c=true,isAnimating:d=false,BlockComponent:m=bn,parseMarkdownIntoBlocksFn:f=qe,...h})=>{let u=useId(),[g,w]=useTransition(),[k,x]=useState([]),N=useMemo(()=>f(typeof e=="string"?e:""),[e,f]);useEffect(()=>{t==="streaming"?w(()=>{x(N);}):x(N);},[N,t]);let T=t==="streaming"?k:N,B=useMemo(()=>T.map((H,L)=>`${u}-${L}`),[T.length,u]),O=useMemo(()=>({shikiTheme:i,controls:c,isAnimating:d,mode:t,mermaid:l}),[i,c,d,t,l]),F=useMemo(()=>({...Ut,...o}),[o]);return useEffect(()=>{if(!(Array.isArray(r)&&r.some(S=>Array.isArray(S)?S[0]===Ve:S===Ve)))return;let L=false;if(Array.isArray(s)){let S=s.find(ne=>Array.isArray(ne)?ne[0]===We:ne===We);S&&Array.isArray(S)&&S[1]&&(L=S[1].singleDollarTextMath===true);}let R=typeof e=="string"?e:"",z=R.includes("$$"),y=L&&(/[^$]\$[^$]/.test(R)||/^\$[^$]/.test(R)||/[^$]\$$/.test(R));(z||y)&&import('katex/dist/katex.min.css');},[r,s,e]),t==="static"?jsx(P.Provider,{value:O,children:jsx("div",{className:p("space-y-4",a),children:jsx(He,{components:F,rehypePlugins:r,remarkPlugins:s,...h,children:e})})}):jsx(P.Provider,{value:O,children:jsx("div",{className:p("space-y-4",a),children:T.map((H,L)=>jsx(m,{components:F,content:H,index:L,rehypePlugins:r,remarkPlugins:s,shouldParseIncompleteMarkdown:n,...h},B[L]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);Dr.displayName="Streamdown";var vn=({children:e,className:t,minZoom:n=.5,maxZoom:o=3,zoomStep:r=.1,showControls:s=true,initialZoom:a=1,fullscreen:i=false})=>{let l=useRef(null),c=useRef(null),[d,m]=useState(a),[f,h]=useState({x:0,y:0}),[u,g]=useState(false),[w,k]=useState({x:0,y:0}),[x,N]=useState({x:0,y:0}),T=useCallback(y=>{m(I=>Math.max(n,Math.min(o,I+y)));},[n,o]),B=useCallback(()=>{T(r);},[T,r]),O=useCallback(()=>{T(-r);},[T,r]),F=useCallback(()=>{m(a),h({x:0,y:0});},[a]),H=useCallback(y=>{y.preventDefault();let I=y.deltaY>0?-r:r;T(I);},[T,r]),L=useCallback(y=>{if(y.button!==0||y.isPrimary===false)return;g(true),k({x:y.clientX,y:y.clientY}),N(f);let I=y.currentTarget;I instanceof HTMLElement&&I.setPointerCapture(y.pointerId);},[f]),R=useCallback(y=>{if(!u)return;y.preventDefault();let I=y.clientX-w.x,S=y.clientY-w.y;h({x:x.x+I,y:x.y+S});},[u,w,x]),z=useCallback(y=>{g(false);let I=y.currentTarget;I instanceof HTMLElement&&I.releasePointerCapture(y.pointerId);},[]);return useEffect(()=>{let y=l.current;if(y)return y.addEventListener("wheel",H,{passive:false}),()=>{y.removeEventListener("wheel",H);}},[H]),useEffect(()=>{let y=c.current;if(y&&u)return document.body.style.userSelect="none",y.addEventListener("pointermove",R,{passive:false}),y.addEventListener("pointerup",z),y.addEventListener("pointercancel",z),()=>{document.body.style.userSelect="",y.removeEventListener("pointermove",R),y.removeEventListener("pointerup",z),y.removeEventListener("pointercancel",z);}},[u,R,z]),jsxs("div",{className:p("relative",i?"h-full w-full":"w-full",t),ref:l,style:{cursor:u?"grabbing":"grab"},children:[s&&jsxs("div",{className:p("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",i?"bottom-4 left-4":"bottom-2 left-2"),children:[jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d>=o,onClick:B,title:"Zoom in",type:"button",children:jsx(ZoomInIcon,{size:16})}),jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d<=n,onClick:O,title:"Zoom out",type:"button",children:jsx(ZoomOutIcon,{size:16})}),jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:F,title:"Reset zoom and pan",type:"button",children:jsx(RotateCcwIcon,{size:16})})]}),jsx("div",{className:p("origin-center transition-transform duration-150 ease-out",i&&"flex h-full w-full items-center justify-center"),onPointerDown:L,ref:c,role:"application",style:{transform:`translate(${f.x}px, ${f.y}px) scale(${d})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})};var rt=({chart:e,className:t,config:n,fullscreen:o=false})=>{let[r,s]=useState(null),[a,i]=useState(true),[l,c]=useState(""),[d,m]=useState(""),[f,h]=useState(0),{mermaid:u}=useContext(P),g=u==null?void 0:u.errorComponent;if(useEffect(()=>{(async()=>{try{s(null),i(!0);let x=await se(n),N=e.split("").reduce((O,F)=>(O<<5)-O+F.charCodeAt(0)|0,0),T=`mermaid-${Math.abs(N)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:B}=await x.render(T,e);c(B),m(B);}catch(x){if(!(d||l)){let N=x instanceof Error?x.message:"Failed to render Mermaid chart";s(N);}}finally{i(false);}})();},[e,n,f]),a&&!l&&!d)return jsx("div",{className:p("my-4 flex justify-center p-4",t),children:jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(r&&!l&&!d){let k=()=>h(x=>x+1);return g?jsx(g,{chart:e,error:r,retry:k}):jsxs("div",{className:p("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",r]}),jsxs("details",{className:"mt-2",children:[jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let w=l||d;return jsx(vn,{className:p(o?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:o,maxZoom:3,minZoom:.5,showControls:true,zoomStep:.1,children:jsx("div",{"aria-label":"Mermaid chart",className:p("flex justify-center",o&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:w},role:"img"})})};export{p as a,Rn as b,rt as c,qe as d,Fe as e,Sr as f,Ar as g,P as h,bn as i,Dr as j};